-- TODO add integration tests for sync
